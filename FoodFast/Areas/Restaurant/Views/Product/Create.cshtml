@model FoodFast.DAL.Models.ProductModel
@{
    ViewData["title"] = "Thêm sản phẩm";
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản Lý Menu - FoodFast Restaurant</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <style>
        /* Layout fix để không cuộn ngang */
        .layout {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 250px;
            min-height: 100vh;
            flex-shrink: 0;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            overflow-x: auto; /* nếu table rộng thì chỉ content scroll */
        }

        .sidebar .nav-link {
            color: rgba(255, 255, 255, 0.8);
            padding: 12px 20px;
            border-radius: 8px;
            margin: 5px 15px;
            transition: all 0.3s ease;
        }

            .sidebar .nav-link:hover,
            .sidebar .nav-link.active {
                background: rgba(255, 255, 255, 0.2);
                color: white;
            }

        .product-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
        }

        .status-badge {
            font-size: 0.8rem;
        }

        @@media (max-width: 768px) {
            .layout {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
            }
        }
    </style>


 </head>
 <body>
    <div class="col-md-9">

        <form asp-action="Create" method="post" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <!-- Name -->
            <div class="mb-3">
                <label asp-for="Name" class="form-label"></label>
                <input asp-for="Name" class="form-control" />
                <div class="text-danger">
                    <span asp-validation-for="Name"></span>
                </div>
            </div>

            <!-- Price -->
            <div class="mb-3">
                <label asp-for="Price" class="form-label"></label>
                <input asp-for="Price" pattern="[0-9.,]+" class="form-control typing-price" />
                <span id="price-convert" class="form-text"></span>
                <div class="text-danger">
                    <span asp-validation-for="Price"></span>
                </div>
            </div>

            <!-- Description -->
            <div class="mb-3">
                <label asp-for="Description" class="form-label"></label>
                <textarea asp-for="Description" class="form-control"></textarea>
                <div class="text-danger">
                    <span asp-validation-for="Description"></span>
                </div>
            </div>

            <!-- Category -->
            <div class="mb-3">
                <label asp-for="CategoryId" class="form-label"></label>
                <select asp-for="CategoryId" class="form-select" asp-items="ViewBag.Categories">
                    <option value="">--choose a category--</option>
                </select>
                <div class="text-danger">
                    <span asp-validation-for="CategoryId"></span>
                </div>
            </div>

            <!-- Image -->
            <div class="mb-3">
                <label asp-for="ImageUpload" class="form-label"></label>
                <input asp-for="ImageUpload" type="file" class="form-control" />
                <div class="text-danger">
                    <span asp-validation-for="ImageUpload"></span>
                </div>
                <img id="imgpreview" class="pt-2 img-thumbnail" style="max-width:200px; max-height:200px;" />
            </div>

            <!-- Submit -->
            <div class="mb-3">
                <button type="submit" class="btn btn-primary">Thêm</button>
            </div>
        </form>

        <a asp-action="Index" class="btn btn-link">Quay lại</a>
    </div>
</body>
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script src="https://cdn.ckeditor.com/4.22.1/standard/ckeditor.js"></script>
    <script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $("#imgpreview").attr("src", e.target.result);
                }

                reader.readAsDataURL(input.files[0]); // convert file to base64 string
            }
        }

        // Gắn sự kiện vào input file, không phải img
        $("#ImageUpload").change(function () {
            readURL(this);
        });
    </script>
    <script>
        CKEDITOR.replace('Description');
    </script>
    <script>
        $(".typing-price").on("keyup", function () {

            var currency_input = $(this).val(); //29980000

            $("#price-convert").html(

                new Intl.NumberFormat('vn-VN', { style: 'currency', currency: 'VND' }).format(
                    currency_input,

                )
            );
        });
    </script>
}